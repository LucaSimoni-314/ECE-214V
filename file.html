<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valentine's Surprise for Marta</title>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Montserrat:wght@400;600&family=Playfair+Display:ital,wght@0,600;1,600&family=Patrick+Hand&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-pink: #ffc0cb;
            --ticket-pink: #ff99ac;
            --val-red: #d23636;
            --black: #000000;
        }

        body {
            background-color: var(--bg-pink);
            font-family: 'Montserrat', sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-x: hidden;
        }

        /* --- HEART RAIN --- */
        .heart {
            position: fixed;
            top: -5vh;
            color: rgba(210, 54, 54, 0.4);
            font-size: 20px;
            user-select: none;
            pointer-events: none;
            z-index: 10;
            animation: fall linear forwards;
        }

        @keyframes fall {
            0% { transform: translateY(0vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
        }

        /* --- HERO SECTION --- */
        .hero-section {
            position: relative;
            width: 100%;
            height: 550px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            border-bottom: 4px solid var(--black);
            background: #000;
        }

        .background-slideshow {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 1;
        }

        .slideshow-track {
            display: flex;
            height: 100%;
            transition: transform 15s cubic-bezier(0.45, 0, 0.55, 1);
            will-change: transform;
    backface-visibility: hidden;
        }

        .slide {
            min-width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(0.55);
        }

        .hero-title {
            position: relative;
            z-index: 2;
            font-family: 'Great Vibes', cursive;
            font-size: clamp(3.5rem, 8vw, 5.5rem);
            color: var(--black);
            margin: 0 0 5px 0;
            text-align: center;
            text-shadow: -2px -2px 0 #fff, 2px -2px 0 #fff, -2px 2px 0 #fff, 2px 2px 0 #fff;
        }

        .hero-content {
            position: relative;
            z-index: 2;
            padding: 10px 20px;
            width: 85%;
            max-width: 800px;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        #affirmation-text {
            color: var(--val-red);
            font-family: 'Patrick Hand', cursive;
            font-weight: 800; /* Extra Bold */
            font-size: clamp(1.8rem, 5vw, 2.8rem);
            margin: 5px 0 0 0;
            line-height: 1.2;
            /* White glow effect to make red text readable on photos */
            text-shadow: 
                -1px -1px 0 #fff,  
                 1px -1px 0 #fff,
                -1px  1px 0 #fff,
                 1px  1px 0 #fff,
                 0px 0px 10px rgba(255,255,255,0.8);
        }

        /* --- MAIN DASHBOARD --- */
        .main-container {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: stretch;
            gap: 40px;
            width: 95%;
            max-width: 1300px;
            margin: 50px 0;
        }

        .left-col-note { flex: 1.5; display: flex; }

        .love-card {
            background: white;
            padding: 40px;
            border-radius: 25px;
            border: 4px solid var(--black);
            box-shadow: 15px 15px 0px var(--black);
            position: relative;
            display: flex;
            flex-direction: column;
            width: 100%;
            max-height: 850px;
        }

        .note-content {
            overflow-y: auto;
            padding-right: 15px;
        }

        .note-content::-webkit-scrollbar { width: 8px; }
        .note-content::-webkit-scrollbar-track { background: #f0f0f0; border-radius: 10px; }
        .note-content::-webkit-scrollbar-thumb { background: var(--ticket-pink); border-radius: 10px; border: 2px solid white; }

        .note-body { 
            font-family: 'Patrick Hand', cursive; 
            font-size: 1.7rem; 
            line-height: 1.6; 
            color: #222; 
            margin: 0;
        }

        .fancy-script {
            font-family: 'Great Vibes', cursive;
            font-size: 3rem;
            color: var(--val-red);
            font-weight: normal;
            margin-bottom: 20px;
            display: inline-block;
            padding-bottom: 5px;
        }

        .right-col-stack { flex: 1.2; display: flex; flex-direction: column; gap: 30px; min-width: 380px; }
        
        .playlist-section {
            background: rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 3px solid white;
            padding: 10px;
        }

        .ticket-vault {
            background: rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            border: 3px solid white;
            padding: 20px;
            flex-grow: 1;
            max-height: 450px;
            overflow-y: auto;
        }

        /* TICKETS */
        .category-group { display: flex; flex-direction: column; align-items: center; width: 100%; margin-bottom: 25px; }
        .grid-header { font-family: 'Playfair Display', serif; font-size: 1.2rem; font-style: italic; color: var(--val-red); margin-bottom: 12px; border-bottom: 1px solid rgba(210, 54, 54, 0.2); width: 90%; text-align: center; }
        .sub-ticket-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; justify-items: center; }
        .ticket-wrapper { filter: drop-shadow(0 0 0 2.5px var(--black)); }
        
        .ticket {
            background-color: var(--ticket-pink);
            color: var(--black);
            width: 70px; height: 120px;
            display: flex; flex-direction: column; align-items: center; justify-content: space-between;
            padding: 10px 0; cursor: pointer; transition: 0.2s;
            border: 2px solid var(--black);
            -webkit-mask-image: radial-gradient(circle at 50% 0%, transparent 8px, black 9px), 
                                radial-gradient(circle at 50% 100%, transparent 8px, black 9px);
            mask-image: radial-gradient(circle at 50% 0%, transparent 8px, black 9px), 
                        radial-gradient(circle at 50% 100%, transparent 8px, black 9px);
            mask-composite: intersect; 
        }
        .ticket:hover { transform: scale(1.08) rotate(2deg); }
        .ticket-title { font-family: 'Great Vibes', cursive; font-size: 0.8rem; writing-mode: vertical-rl; transform: rotate(180deg); text-align: center; flex-grow: 1; }
        .ticket-dash { width: 80%; border-top: 1.5px dashed var(--black); }
        .ticket-id { font-size: 0.6rem; font-family: monospace; font-weight: bold; }
        .redeemed { filter: grayscale(1) opacity(0.3) !important; pointer-events: none; }

        @media (max-width: 1000px) {
            .main-container { flex-direction: column; align-items: center; }
            .left-col-note, .right-col-stack { width: 95%; min-width: unset; }
            .love-card { max-height: 550px; }
        }
    </style>
</head>
<body>

    <div class="hero-section">
        <div class="background-slideshow">
            <div class="slideshow-track" id="track"></div>
        </div>
        <h1 class="hero-title">Happy Valentine's Day</h1>
        <div class="hero-content">
            <h2 style="font-family: 'Great Vibes'; color: var(--val-red); font-size: 2.5rem; margin: 0; text-shadow: 2px 2px 0 #fff;">ðŸ’Œ Today's Thought</h2>
            <p id="affirmation-text">"Loading..."</p>
        </div>
    </div>

    <div class="main-container">
        <div class="left-col-note">
            <div class="love-card">
                <div class="note-content">
                    <div class="fancy-script">My Dearest, Marta,</div>
                    <p class="note-body">
                        I want to start by letting you know that I am not a writer, and never have been. Please feel free to correct my grammar, my punctuation, and (if god forbid spell check misses it) my spelling too. <br><br>
                        When you wrote your letter you told me the story of when you first saw me, so I guess itâ€™s my turn to tell you the story of when I was certain I knew for certain I wanted this relationship. <br><br>
                        Remember when we were at the train station outside of the Belvedere? We were both so exhausted. You had just animated every painting you saw with so much passion (except for the modern art you shat on) and we had walked miles around the city. We found a bench where we sat down where you closed your eyes and laid your head on my shoulder. Iâ€™d give so much to be back there supporting you, caring for you, and holding your hand. While it might have been a boring moment, the simple quiet peace we shared in that moment is my dream. It made me realize that you were the one I wanted to keep sharing it with.<br><br>
                        Do you know your beautiful? Real question tbh. You are stunning and not just in a superficial way. The way you smile and laugh at the shitiest attempt at a joke, the way you can talk for hours and hours and never run out of things to talk about, the way you are so emotionally intelligent that you can tell what Iâ€™m thinking before I think. Youâ€™re so smart, so successful, so funny, have I said beautiful yet ðŸ¤”. I get so lost just looking into your eyes. I get so giddy just thinking about spending time with you and double so when I think about how youâ€™ll be here in May. I enjoy talking to you, and when we were in Vienna and New York I enjoyed spending every moment with you. <br><br>
                        I told you earlier this week that I donâ€™t think love is passionate, it's not fiery and fierce and itâ€™s not loud and fast. Itâ€™s a slow long rocky path with no end in sight. And trust me with a whole ocean separating us and being on 2 different continents, with our own problems and issues to overcome thereâ€™s gonna be a whole lotta rocks. But the path in its own right is beautiful with something new around every corner. There is no one more, I want to walk it hand in hand, arm in arm, one bench in a train station at a time with, than you.<br><br>
                    </p>
                    <div class="fancy-script">Yours, Luca</div>
                </div>
            </div>
        </div>

        <div class="right-col-stack">
            <div class="playlist-section">
                <iframe style="border-radius:12px" 
                    src="https://open.spotify.com/embed/playlist/7dKmL55XxwTzm3WubHaRnW?utm_source=generator"
                    width="100%" height="352" frameBorder="0" allowfullscreen="" 
                    allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
                    loading="lazy">
                </iframe>
            </div>

            <div class="ticket-vault" id="ticket-container">
                <h3 style="text-align: center; font-family: 'Playfair Display'; margin-top: 0; font-size: 1.3rem;">Voucher Book</h3>
            </div>
        </div>
    </div>

    <script>
        // --- 1. CONFIGURATION ---
        const photoFiles = [
            "us vienna.jpeg", 
            "us garden.jpeg", 
            "us lake.jpeg",
            "knight us.png",
            "us dinner.png",
            "us christmas market.png",
            "us vienna 2.png",
            "us vienna 3.png",
            "us como.png",
            "us villinus.png",
            "us snow latina.png",
            "us working.png",
            "us working 2.png",
            "us cat.png",
            "WE ARE CHARLIE KIRK.png"
        ];
        
        const repoURL = "https://raw.githubusercontent.com/LucaSimoni-314/ECE-214V/main/marta%20final_pics/";

        const loveAffirmations = [
            "If you were a fruit you'd be a fineapple.",
            "I'm so fucking lucky to have you by my side.",
            "You make me smile just by being you.",
            "Your waist is thin, your body is tea, your smile is big, beautiful, and sexy.",
            "When I think about you I start giggling and kicking my feet.",
            "Choosing between you and Tyler is a tough choice, but I'd still choose you.",
            "Peanut is jealous with how you're able to take my attention away.",
            "I love the way you see the world.",
            "You're my favorite part of every single day.",
            "You're the smartest, funniest person I know.",
            "May can't come soon enough.",
            "I'd sit on a train station bench with you forever.",
            "I can't give you flowers in person but here are some virtual ones ðŸŒ¸ðŸŒºðŸŒ¼ðŸŒ»ðŸŒ·ðŸŒ¹.",
            "I get giddy just thinking about seeing you again.",
            "I'm straight kicking my feet and giggling thinking about you right now.",
            "Pinky, are you pondering what I'm pondering? How to teleport to Poland and take over your world.",
            "Every scar every imperfection, and yet I'm here and I love all of you.",
            "Drunk words are sober thoughts and I think you've had alot of drunk words from me.",
            "*In the most British, BOT-TOE-O-WAD-DTDER, accent possible*, \"Hey love\".",
            "You wear short skirts I wear tshirts you're cheer captain and I'm on the bleachers... you belong with me.",
            "Lowkirkenuinely would you be the Erika to my JD VANCE.",
            "You might actually be able to get me to watch heated rivalry. That's the biggest compliment I can give.",
            "Listening to your thoughts is like Kokaina to me.",
            "You're so unbelievablly smart and you don't even know.",
            "JesteÅ› najpiÄ™kniejszÄ… kobietÄ…",
            "DziÄ™kujÄ™, Å¼e jesteÅ› (I'm sorry my polish is not good)"
        ];

        function loadSlideshow() {
            const track = document.getElementById('track');
            photoFiles.forEach(file => {
                const img = document.createElement('img');
                img.className = 'slide';
                img.src = repoURL + encodeURIComponent(file);
                track.appendChild(img);
            });
        }

        function getLocalAffirmation() {
            const now = new Date();
            const start = new Date(now.getFullYear(), 0, 0);
            const diff = now - start;
            const oneDay = 1000 * 60 * 60 * 24;
            const dayOfYear = Math.floor(diff / oneDay);
            const index = dayOfYear % loveAffirmations.length;
            document.getElementById('affirmation-text').innerText = `"${loveAffirmations[index]}"`;
        }

        function buildTickets() {
            const categories = ["Movie Choice", "Dress to Impress", "Taylor Song", "Bicep Pic"];
            const ticketContainer = document.getElementById('ticket-container');
            const redeemedTickets = JSON.parse(localStorage.getItem('redeemedVouchers')) || [];

            categories.forEach((catName, catIndex) => {
                const group = document.createElement('div');
                group.className = 'category-group';
                const header = document.createElement('div');
                header.className = 'grid-header';
                header.innerHTML = catName;
                group.appendChild(header);
                
                const subGrid = document.createElement('div');
                subGrid.className = 'sub-ticket-grid';

                for(let i = 1; i <= 4; i++) {
                    const ticketID = `ticket-${catIndex}-${i}`;
                    const wrapper = document.createElement('div');
                    wrapper.className = 'ticket-wrapper';
                    if (redeemedTickets.includes(ticketID)) wrapper.classList.add('redeemed');
                    
                    const t = document.createElement('div');
                    t.className = 'ticket';
                    t.innerHTML = `<div class="ticket-dash"></div><div class="ticket-title">${catName}</div><div class="ticket-dash"></div><div class="ticket-id">â„– ${i}</div>`;
                    
                    t.onclick = function() {
                        if (!wrapper.classList.contains('redeemed')) {
                            wrapper.classList.add('redeemed');
                            const saved = JSON.parse(localStorage.getItem('redeemedVouchers')) || [];
                            saved.push(ticketID);
                            localStorage.setItem('redeemedVouchers', JSON.stringify(saved));
                            alert("Voucher Redeemed! â¤ï¸");
                        }
                    };
                    wrapper.appendChild(t);
                    subGrid.appendChild(wrapper);
                }
                group.appendChild(subGrid);
                ticketContainer.appendChild(group);
            });
        }

        let slideIdx = 0;
        function playSlides() {
            const track = document.getElementById('track');
            const slides = document.querySelectorAll('.slide');
            if(slides.length === 0) return;
            slideIdx++;
            if (slideIdx >= slides.length) slideIdx = 0;
            track.style.transform = `translateX(${slideIdx * -100}%)`;
            setTimeout(playSlides, 15000);
        }

        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            heart.innerHTML = 'â¤ï¸';
            heart.style.left = Math.random() * 100 + "vw";
            heart.style.animationDuration = Math.random() * 3 + 4 + "s";
            heart.style.opacity = Math.random() * 0.4 + 0.2;
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 7000);
        }

        window.onload = () => { 
            loadSlideshow();
            getLocalAffirmation(); 
            buildTickets();
            playSlides(); 
            setInterval(createHeart, 450); 
        };
    </script>
</body>
</html>